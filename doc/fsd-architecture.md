# FSD (Feature-Sliced Design) Архитектура проекта

## Обзор проекта

Проект представляет собой интерактивную карту с домиками, где каждый домик - это отдельный проект. При клике на домик происходит переход на страницу проекта с уникальным контентом (цвета, картинки, текст), но с общей переиспользуемой структурой.

## Структура проекта по FSD

```
src/
├── app/                    # Инициализация приложения
│   ├── App.tsx            # Корневой компонент
│   ├── App.css            # Глобальные стили
│   ├── index.css          # Базовые стили
│   └── main.tsx           # Точка входа
│
├── pages/                  # Страницы приложения
│   ├── map/               # Страница карты с домиками
│   │   ├── ui/
│   │   │   ├── MapPage.tsx         # Основной компонент страницы карты
│   │   │   ├── MapCanvas.tsx      # Canvas/карта с домиками
│   │   │   ├── HouseMarker.tsx    # Компонент домика на карте
│   │   │   └── index.ts
│   │   ├── model/
│   │   │   ├── useMapNavigation.ts  # Логика навигации по карте
│   │   │   └── index.ts
│   │   └── index.ts
│   │
│   └── project/           # Страница проекта (динамическая)
│       ├── ui/
│       │   ├── ProjectPage.tsx         # Основной компонент страницы
│       │   ├── ProjectPreview.tsx      # Секция превью проекта
│       │   ├── ProjectContent.tsx      # Секция контента
│       │   ├── ProjectFooter.tsx       # Секция футера
│       │   ├── ProjectForm.tsx         # Секция формы
│       │   └── index.ts
│       ├── model/
│       │   ├── useProjectData.ts       # Хук для получения данных проекта
│       │   ├── useProjectSections.ts   # Хук для управления секциями
│       │   ├── useProjectTheme.ts      # Хук для получения темы проекта
│       │   └── index.ts
│       └── index.ts
│
├── widgets/               # Крупные самостоятельные блоки
│   ├── header/            # Шапка сайта
│   │   ├── ui/
│   │   │   ├── Header.tsx
│   │   │   └── index.ts
│   │   └── index.ts
│   │
│   ├── navigation/        # Навигация между страницами
│   │   ├── ui/
│   │   │   ├── Navigation.tsx
│   │   │   └── index.ts
│   │   ├── model/
│   │   │   ├── useNavigation.ts
│   │   │   └── index.ts
│   │   └── index.ts
│   │
│   ├── project-card/      # Карточка проекта (для списков/превью)
│   │   ├── ui/
│   │   │   ├── ProjectCard.tsx
│   │   │   └── index.ts
│   │   └── index.ts
│   │
│   ├── project-theme/     # Тема проекта (цвета, стили)
│   │   ├── ui/
│   │   │   ├── ProjectThemeProvider.tsx
│   │   │   └── index.ts
│   │   ├── model/
│   │   │   ├── useProjectTheme.ts      # Хук для получения темы проекта
│   │   │   ├── projectThemes.ts        # Конфигурация тем
│   │   │   └── index.ts
│   │   └── index.ts
│   │
│   ├── project-image/     # Загрузка и отображение изображений проекта
│   │   ├── ui/
│   │   │   ├── ProjectImage.tsx
│   │   │   └── index.ts
│   │   └── index.ts
│   │
│   └── project-navigation/ # Навигация между проектами
│       ├── ui/
│       │   ├── ProjectNavigation.tsx
│       │   └── index.ts
│       ├── model/
│       │   ├── useProjectNavigation.ts
│       │   └── index.ts
│       └── index.ts
│
├── entities/              # Бизнес-сущности
│   └── project/          # Сущность проекта
│       ├── model/
│       │   ├── type.ts           # Типы проекта (уже существует)
│       │   ├── data.ts           # Данные проектов (уже существует)
│       │   ├── index.ts          # Экспорты (уже существует)
│       │   └── hooks.ts          # Базовые хуки для работы с проектами
│       │
│       └── index.ts
│
└── shared/               # Переиспользуемые ресурсы
    ├── lib/              # Утилиты и библиотеки
    │   ├── router/       # Роутинг
    │   │   ├── routes.ts
    │   │   └── index.ts
    │   ├── i18n/         # Интернационализация
    │   │   ├── translations.ts
    │   │   └── index.ts
    │   └── utils/        # Вспомогательные функции
    │       ├── format.ts
    │       └── index.ts
    │
    └── assets/           # Статические ресурсы
        ├── images/
        │   ├── projects/    # Изображения проектов
        │   └── common/      # Общие изображения
        ├── icons/
        └── fonts/
```

## Описание слоев

### 1. App (app/)

Инициализация приложения, провайдеры, глобальные стили.

### 2. Pages (pages/)

Страницы приложения:

- **map/** - Страница с интерактивной картой и домиками
  - Содержит логику отображения карты и домиков
  - Управляет навигацией по карте
- **project/** - Динамическая страница проекта (роут: `/project/:id`)
  - Получает данные проекта из `entities/project`
  - Использует виджеты для темы, изображений и навигации
  - Рендерит секции проекта динамически

### 3. Widgets (widgets/)

Крупные самостоятельные блоки интерфейса:

- **header/** - Шапка сайта
- **navigation/** - Навигация между страницами
- **project-card/** - Карточка проекта для отображения в списках
- **project-theme/** - Управление темами проектов (цвета, стили, конфигурация)
- **project-image/** - Работа с изображениями проектов
- **project-navigation/** - Навигация между проектами (предыдущий/следующий)

### 4. Entities (entities/)

Бизнес-сущности:

- **project/** - Сущность проекта (уже частично реализована)
  - Содержит типы, данные и базовые хуки для работы с проектами

### 5. Shared (shared/)

Переиспользуемые ресурсы:

- **lib/** - Утилиты (роутинг, i18n, helpers)
- **assets/** - Статические ресурсы (изображения, иконки, шрифты)

## Принципы работы

### Карта с домиками (pages/map)

1. На карте отображаются домики на основе данных из `entities/project/model/data.ts`
2. Каждый домик (`HouseMarker`) использует тему из `widgets/project-theme`
3. При клике на домик происходит переход на страницу проекта через роутер

### Страница проекта (pages/project)

1. Получает ID проекта из URL параметров
2. Загружает данные проекта через `entities/project/model`
3. Применяет тему проекта через `widgets/project-theme` (использует хук `useProjectTheme`)
4. Использует `widgets/project-image` для отображения изображений
5. Использует `widgets/project-navigation` для навигации между проектами
6. Рендерит секции проекта динамически на основе `sections` из данных:
   - `preview` - Превью проекта
   - `content` - Основной контент
   - `footer` - Футер
   - `form` - Форма обратной связи

### Темы проектов (widgets/project-theme)

Каждый проект имеет свою тему с:

- Основным цветом
- Вторичным цветом
- Фоновым изображением или градиентом
- Стилями текста

Пример структуры темы:

```typescript
type ProjectTheme = {
  primaryColor: string;
  secondaryColor: string;
  backgroundImage?: string;
  backgroundGradient?: string[];
  textColor: string;
};
```

Конфигурация тем хранится в `widgets/project-theme/model/projectThemes.ts`

## Роутинг

Рекомендуемые маршруты:

- `/` - Главная страница (карта с домиками)
- `/project/:id` - Страница проекта по ID
- `/about` - О нас (опционально)
- `/contact` - Контакты (опционально)

## Расширение структуры

### Добавление нового проекта:

1. Добавить данные в `entities/project/model/data.ts`
2. Добавить тему в `widgets/project-theme/model/projectThemes.ts`
3. Добавить изображения в `shared/assets/images/projects/`
4. Добавить переводы в `shared/lib/i18n/translations.ts`

### Добавление новой секции:

1. Расширить тип `ProjectSectionType` в `entities/project/model/type.ts`
2. Создать компонент секции в `pages/project/ui/`
3. Добавить логику отображения в `pages/project/model/useProjectSections.ts`

## Преимущества такой структуры

1. **Масштабируемость** - Легко добавлять новые проекты и секции
2. **Переиспользование** - Компоненты и логика переиспользуются между проектами
3. **Изоляция** - Каждый слой изолирован и имеет четкую ответственность
4. **Тестируемость** - Легко тестировать отдельные части системы
5. **Поддерживаемость** - Понятная структура упрощает поддержку кода
